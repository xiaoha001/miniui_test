<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Test1</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <link href="../res/css/common.css" rel="stylesheet" type="text/css" />
    <script src="/scripts/boot.js" type="text/javascript"></script>

</head>
<body >
<h1>Test1</h1>

<div style="padding-bottom:5px;">
    <span>员工姓名：</span><input type="text" id="key"  />
    <input type="button" value="查找" onclick="search()"/>
</div>

<div id="datagrid1" class="mini-datagrid" style="width:700px;height:250px;"
     url="/EmpController"
     idField="id" allowResize="true"
     sizeList="[20,30,50,100]" pageSize="50" >
    <div property="columns">
        <div type="indexcolumn" ></div>
        <div field="loginname" width="120" headerAlign="center">员工帐号</div>
        <div field="name" width="120" headerAlign="center">姓名</div>
        <div field="gender" width="100" renderer="onGenderRenderer" align="center" headerAlign="center">性别</div>
        <div field="salary" numberFormat="¥#,0.00" align="right" width="100">薪资</div>
        <div field="age" width="100" decimalPlaces="2" dataType="float">年龄</div>
        <div field="createtime" width="100" headerAlign="center" dateFormat="yyyy-MM-dd">创建日期</div>
    </div>
</div>

<script type="text/javascript">

    mini.parse();
    var grid = mini.get("datagrid1");
    grid.load({key: ''});

    function search() {
        var key = document.getElementById("key").value;
        grid.load({
            key: key, pageIndex: "0", pageSize: "20", sortField: "0", sortOrder: "0"
        });
    }
    $("#key").bind("keydown", function (e) {
        if (e.keyCode === 13) {
            search();
        }
    });

    function onGenderRenderer(e) {
        if (e.value === 1) {
            return "男";
        } else if (e.value === 2) {
            return "女";
        }
        return "";
    }

</script>

    <div class="description">
        <h3>Description</h3>
    </div>


</body>
</html>